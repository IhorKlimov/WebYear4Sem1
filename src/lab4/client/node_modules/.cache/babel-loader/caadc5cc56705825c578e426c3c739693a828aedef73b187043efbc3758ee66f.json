{"ast":null,"code":"var _jsxFileName = \"/Users/ihorklimov/Desktop/KPI/Year 4/Semester 1/WEB/Labs/src/lab4/client/src/VirtualizedList.js\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport { Paper, styled } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  io\n} = require(\"socket.io-client\");\nconst Item = styled(Paper)(({\n  theme\n}) => ({\n  ...theme.typography.body2,\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n  width: '100%'\n}));\n_c = Item;\nexport default function VirtualizedList() {\n  _s();\n  const [list, setList] = useState([]);\n  const [input, setInput] = useState('');\n  const scrollRef = useRef(null);\n  const myId = useMemo(() => {\n    return guidGenerator();\n  }, []);\n  const webSocket = useMemo(() => {\n    console.log(\"memo\");\n    return io('ws://localhost:443/', {\n      transports: ['websocket']\n    });\n  }, []);\n  webSocket.on('message', event => {\n    const data = JSON.parse(event);\n    const newList = [...list];\n    newList.push(data);\n    setList(newList);\n  });\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollIntoView({\n        behaviour: \"smooth\"\n      });\n    }\n  }, [list]);\n  function renderRow(item, index) {\n    const marginLeft = item.fromId === myId ? '200px' : '20px';\n    const marginRight = item.fromId === myId ? '20px' : '200px';\n    const justify = item.fromId === myId ? 'right' : 'left';\n    const bgColor = item.fromId === myId ? 'cadetblue' : 'orange';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: marginLeft,\n        marginTop: '10px',\n        marginBottom: '10px',\n        marginRight: marginRight,\n        display: 'flex',\n        justifyContent: justify\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: bgColor,\n          paddingTop: '10px',\n          paddingBottom: '10px',\n          color: 'white',\n          borderRadius: '100px',\n          paddingLeft: '10px',\n          paddingRight: '10px'\n        },\n        children: item.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this);\n  }\n  function sendMessage() {\n    const data = {\n      type: 'message',\n      message: input,\n      fromId: myId\n    };\n    webSocket.send(JSON.stringify(data));\n    console.log(list);\n    const newList = [...list];\n    newList.push(data);\n    setList(newList);\n    console.log(list);\n    setInput(\"\");\n  }\n  return /*#__PURE__*/_jsxDEV(Item, {\n    style: {\n      margin: '0 auto',\n      width: '500px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%',\n        height: 500\n      },\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          height: '450px',\n          overflow: 'auto',\n          listStyle: 'none',\n          padding: '0'\n        },\n        children: [list.map((item, index) => renderRow(item, index)), /*#__PURE__*/_jsxDEV(\"li\", {\n          ref: scrollRef\n        }, 1231243124124124124, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        maxWidth: '100%',\n        display: 'flex',\n        padding: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(TextField, {\n        style: {\n          width: '100%'\n        },\n        label: \"Enter a message\",\n        value: input,\n        onChange: event => {\n          setInput(event.target.value);\n        },\n        id: \"fullWidth\",\n        onKeyDown: e => {\n          if (e.code === \"Enter\") {\n            sendMessage();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n  function guidGenerator() {\n    const S4 = function () {\n      return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n    };\n    return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n  }\n}\n_s(VirtualizedList, \"UKoe2N3p/PN9URqw5eHvfOPR1y0=\");\n_c2 = VirtualizedList;\nvar _c, _c2;\n$RefreshReg$(_c, \"Item\");\n$RefreshReg$(_c2, \"VirtualizedList\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Box","TextField","Paper","styled","jsxDEV","_jsxDEV","io","require","Item","theme","typography","body2","textAlign","color","palette","text","secondary","width","_c","VirtualizedList","_s","list","setList","input","setInput","scrollRef","myId","guidGenerator","webSocket","console","log","transports","on","event","data","JSON","parse","newList","push","current","scrollIntoView","behaviour","renderRow","item","index","marginLeft","fromId","marginRight","justify","bgColor","style","marginTop","marginBottom","display","justifyContent","children","background","paddingTop","paddingBottom","borderRadius","paddingLeft","paddingRight","message","fileName","_jsxFileName","lineNumber","columnNumber","sendMessage","type","send","stringify","margin","sx","height","overflow","listStyle","padding","map","ref","maxWidth","label","value","onChange","target","id","onKeyDown","e","code","S4","Math","random","toString","substring","_c2","$RefreshReg$"],"sources":["/Users/ihorklimov/Desktop/KPI/Year 4/Semester 1/WEB/Labs/src/lab4/client/src/VirtualizedList.js"],"sourcesContent":["import * as React from 'react';\nimport {useEffect, useMemo, useRef, useState} from 'react';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport {Paper, styled} from \"@mui/material\";\nconst { io } = require(\"socket.io-client\");\n\nconst Item = styled(Paper)(({theme}) => ({\n    ...theme.typography.body2,\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n    width: '100%'\n}));\n\nexport default function VirtualizedList() {\n    const [list, setList] = useState([]);\n    const [input, setInput] = useState('');\n    const scrollRef = useRef(null);\n    const myId = useMemo(() => {\n        return guidGenerator();\n    }, []);\n    const webSocket = useMemo(() => {\n        console.log(\"memo\")\n        return io('ws://localhost:443/', { transports : ['websocket']});\n    }, []);\n\n    webSocket.on('message', (event) => {\n        const data = JSON.parse(event);\n        const newList = [...list];\n        newList.push(data);\n        setList(newList);    \n    });\n\n    useEffect(() => {\n        if (scrollRef.current) {\n            scrollRef.current.scrollIntoView({behaviour: \"smooth\"});\n        }\n    }, [list]);\n\n    function renderRow(item, index) {\n        const marginLeft = item.fromId === myId ? '200px' : '20px';\n        const marginRight = item.fromId === myId ? '20px' : '200px';\n        const justify = item.fromId === myId ? 'right' : 'left';\n        const bgColor = item.fromId === myId ? 'cadetblue' : 'orange';\n\n        return (\n            <div key={index} style={\n                {\n                    marginLeft: marginLeft,\n                    marginTop: '10px',\n                    marginBottom: '10px',\n                    marginRight: marginRight,\n                    display: 'flex',\n                    justifyContent: justify\n                }}>\n                <div style={\n                    {\n                        background: bgColor,\n                        paddingTop: '10px',\n                        paddingBottom: '10px',\n                        color: 'white',\n                        borderRadius: '100px',\n                        paddingLeft: '10px',\n                        paddingRight: '10px'\n                    }\n                }>{item.message}</div>\n            </div>\n        );\n    }\n\n    function sendMessage() {\n        const data = {type: 'message', message: input, fromId: myId};\n        webSocket.send(JSON.stringify(data));\n        console.log(list)\n        const newList = [...list];\n        newList.push(data);\n        setList(newList);\n        console.log(list)\n        setInput(\"\");\n    }\n\n    return (\n        <Item style={{margin: '0 auto', width: '500px'}}>\n            <Box sx={{width: '100%', height: 500}}>\n                <ul style={{height: '450px', overflow: 'auto', listStyle: 'none', padding: '0'}}>\n                    {list.map((item, index) => (\n                        renderRow(item, index)\n                    ))}\n                    <li ref={scrollRef} key={1231243124124124124}/>\n                </ul>\n            </Box>\n            <Box\n                sx={{\n                    maxWidth: '100%',\n                    display: 'flex',\n                    padding: '10px'\n                }}>\n                <TextField\n                    style={{width: '100%'}}\n                    label=\"Enter a message\"\n                    value={input}\n                    onChange={(event) => {\n                        setInput(event.target.value);\n                    }}\n                    id=\"fullWidth\"\n                    onKeyDown={(e) => {\n                        if (e.code === \"Enter\") {\n                            sendMessage();\n                        }\n                    }\n                    }/>\n            </Box>\n        </Item>\n    );\n\n    function guidGenerator() {\n        const S4 = function () {\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n        };\n        return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}